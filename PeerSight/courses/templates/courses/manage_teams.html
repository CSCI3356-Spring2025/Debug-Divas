{% extends "courses/base.html" %}
{% block title %} Manage Teams in {{ course.name }} {% endblock %}


<!--Administrator sidebar-->
{% block nav %}
<nav
    class="flex flex-col gap-2 px-0 py-5 h-screen bg-gray-800 w-[300px] max-md:w-[250px] max-sm:p-2.5 max-sm:w-full max-sm:h-auto"
    id="sidebar"
>
    <ul class="w-full">
        <li>
          <a
            href="#"
            class="flex gap-4 items-center px-6 py-3 cursor-pointer duration-[0.2s] transition-[background-color] hover:bg-gray-700 max-md:px-5 max-md:py-2.5 max-sm:px-4 max-sm:py-3"
            data-nav-item
          >
            <i class="ti ti-home text-2xl text-white"></i>
            <span class="text-base font-medium text-white max-md:text-sm"
              >Admin Dashboard</span
            >
          </a>
        </li>
        <li>
          <a
            href="#"
            class="flex gap-4 items-center px-6 py-3 cursor-pointer duration-[0.2s] transition-[background-color] hover:bg-gray-700 max-md:px-5 max-md:py-2.5 max-sm:px-4 max-sm:py-3"
            data-nav-item
          >
            <i class="ti ti-book text-2xl text-white"></i>
            <span class="text-base font-medium text-white max-md:text-sm"
              >Your Classes</span
            >
          </a>
        </li>
        <li>
          <a
            href="{% url 'courses:manage_courses' %}"
            class="flex gap-4 items-center px-6 py-3 cursor-pointer duration-[0.2s] transition-[background-color] hover:bg-gray-700 max-md:px-5 max-md:py-2.5 max-sm:px-4 max-sm:py-3"
            data-nav-item
          >
            <i class="ti ti-layout-grid text-2xl text-white"></i>
            <span class="text-base font-medium text-white max-md:text-sm"
              >Manage Courses</span
            >
          </a>
        </li>
        <li>
          <a
            href="#"
            class="flex gap-4 items-center px-6 py-3 cursor-pointer duration-[0.2s] transition-[background-color] hover:bg-gray-700 max-md:px-5 max-md:py-2.5 max-sm:px-4 max-sm:py-3"
            data-nav-item
          >
            <i class="ti ti-users text-2xl text-white"></i>
            <span class="text-base font-medium text-white max-md:text-sm"
              >Manage Teams</span
            >
          </a>
        </li>
        <li>
          <a
          href="{% url 'manage_forms' %}"
            class="flex gap-4 items-center px-6 py-3 cursor-pointer duration-[0.2s] transition-[background-color] hover:bg-gray-700 max-md:px-5 max-md:py-2.5 max-sm:px-4 max-sm:py-3"
            data-nav-item
          >
            <i class="ti ti-list text-2xl text-white"></i>
            <span class="text-base font-medium text-white max-md:text-sm"
              >Manage Forms</span
            >
          </a>
        </li>
        <li>
          <a
          href="{% url 'create_form' %}"
            class="flex gap-4 items-center px-6 py-3 cursor-pointer duration-[0.2s] transition-[background-color] hover:bg-gray-700 max-md:px-5 max-md:py-2.5 max-sm:px-4 max-sm:py-3"
            data-nav-item
          >
            <i class="ti ti-plus text-2xl text-white"></i>
            <span class="text-base font-medium text-white max-md:text-sm"
              >Create Form</span
            >
          </a>
        </li>
        <li>
          <a
            href="#"
            class="flex gap-4 items-center px-6 py-3 cursor-pointer duration-[0.2s] transition-[background-color] hover:bg-gray-700 max-md:px-5 max-md:py-2.5 max-sm:px-4 max-sm:py-3"
            data-nav-item
          >
            <i class="ti ti-chart-dots text-2xl text-white"></i>
            <span class="text-base font-medium text-white max-md:text-sm"
              >View/Evaluate Responses</span
            >
          </a>
        </li>
        <li>
          <a
            href="#"
            class="flex gap-4 items-center px-6 py-3 cursor-pointer duration-[0.2s] transition-[background-color] hover:bg-gray-700 max-md:px-5 max-md:py-2.5 max-sm:px-4 max-sm:py-3"
            data-nav-item
          >
            <i class="ti ti-mail text-2xl text-white"></i>
            <span class="text-base font-medium text-white max-md:text-sm"
              >Manage Reminders</span
            >
          </a>
        </li>
    </ul>
</nav>
{% endblock %}

{% block content %}
<h1 class="text-3xl font-bold mb-5 mt-8 ml-8">Teams in {{ course.name }}</h1>
<hr class="my-4 border-t-4" />

<div class="mt-6 ml-4 mr-4 mb-6 space-y-6">
  <a href="{% url 'courses:create_team' course.id %}" class="bg-green-600 text-white px-3 py-1 rounded">+ New Team</a>
  {% for team in teams %}
    <div class="bg-white p-4 rounded shadow">
      <h2 class="text-xl font-semibold">{{ team.name }}</h2>
      <ul class="mt-2">
        {% for member in team.members.all %}
          <li>{{ member.name }} ({{ member.student_id }})</li>
        {% empty %}
          <li class="text-gray-500">No members yet.</li>
        {% endfor %}
      </ul>

      <form method="post" action="{% url 'courses:add_member' course.id team.id %}" class="mt-2">
        {% csrf_token %}
        <select name="student_id" class="border rounded p-1">
          {% for student in unassigned_students %}
            <option value="{{ student.id }}">{{ student.name }}</option>
          {% endfor %}
        </select>
        <button type="submit" class="ml-2 px-3 py-1 bg-blue-600 text-white rounded">Add</button>
      </form>
    </div>
  {% endfor %}
  <a href="{% url 'courses:course_detail' course.id %}" class="bg-red-600 text-white px-4 py-2 rounded hover:bg-red-700 w-full text-center bg-[#E42D2D]">
    Back to {{ course.name }} 
  </a>  
</div>
{% endblock %}